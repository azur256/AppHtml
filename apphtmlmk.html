<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
<html lang="ja"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<title>AppHtmlメーカー（PHG対応版）</title> 
<script type="text/javascript">
<!--
function bmCreate() {
	var d = document;

	// エラーハンドリング
	if (!d.getElementById("code").value) {
		alert("書式テンプレートの選択が必要です!!");
		return;
	}

	// Bookmarklet（本体と引数定義）
	var bmBase = 'https://github.com/feelingplace/iTunesStoreHtml/raw/master/apphtml.js',
	bmArg = "url+='&out='+'%out%'+'&cnt='+'%cnt%'+'&knd='+'%knd%'+'&aff='+'%aff%'+" +
	"'&phg='+'%phg%'+'&scs='+'%scs%'+'&ipd='+'%ipd%'+'&fmt='+'%fmt%';";//PHGアフィリエイトIDを追加

	// Bookmarklet呼出（雛形）
	var bmlt = "javascript:(function(){var d=document,e=d.createElement('script'),url='" + 
	bmBase + "';if(!url.match(/\\?/))url+='?t='+(new%20Date()).getTime();" + bmArg + 
	"e.charset='utf-8';e.src=url;e.id='bmlt';d.body.appendChild(e);})();";

 	// 出力先セレクタをセット
 	var selectOut = d.getElementById("select-out");
    var outOptions = d.getElementById("select-out").options;
    var outValue = outOptions.item(selectOut.selectedIndex).value;

	// フォームの値をセット
	bmlt = bmlt.replace("%out%", d.getElementById("out").value);
	bmlt = bmlt.replace("%cnt%", d.getElementById("cnt").value);
	bmlt = bmlt.replace("%knd%", d.getElementById("knd").value);
	bmlt = bmlt.replace("%aff%", d.getElementById("aff").value);
	bmlt = bmlt.replace("%phg%", d.getElementById("phg").value);//PHGアフィリエイトIDを追加
	bmlt = bmlt.replace("%scs%", d.getElementById("scs").value);
	bmlt = bmlt.replace("%ipd%", d.getElementById("ipd").value);
	bmlt = bmlt.replace("%fmt%", encodeURIComponent(d.getElementById("code").value));

	// Bookmarkletブックマーク表示
	var html = 
	"<h2>個人向けBookmarklet</h2>" +
	"<strong>デモおよびPC登録用：そのまま実行もしくは登録</strong><br>" +
	'<a href="' + bmlt + '">' + d.getElementById("bmn").value + '</a><br>' +
	"<br>" +
	"<strong>iPhone登録用：登録後 ?以前を削除</strong><br>" +
	'<a href="http://iphone-diary.com/?' + bmlt + '">' + d.getElementById("bmn").value + '</a><br>' +
	"<br>" +
	'<strong style="font-size: 85%;color: red;">登録後に動かない場合、登録内容を編集して以下を上書きして下さい!!</strong><br>' +
	'<textarea style="width:410px;height:100px;padding:2px;">' + bmlt + '</textarea><br>' +
	'<strong style="font-size: 85%;color: red;">Chromeで登録すると動かないんですヽ(;´Д｀)ﾉ</strong><br>' +
	"<br>";
	d.getElementById("bmHtml").innerHTML = html;
}

function bmClear() {
	var d = document;
	d.getElementById("bmHtml").innerHTML = "";
}

function clickKndr(value) {
	var d = document;

	// iPhoneの場合
	if (value == 'software') {
		d.getElementById("bmn").value = "AppHtml";
		d.getElementById("scs").value = "288";
		d.getElementById("ipd").value = "1.5";
	}
	// iPadの場合
	if (value == 'iPadSoftware') {
		d.getElementById("bmn").value = "iPadHtml";
		d.getElementById("scs").value = "432";
		d.getElementById("ipd").value = "0.67";
	}
	// Macの場合
	if (value == 'macSoftware') {
		d.getElementById("bmn").value = "MacHtml";
		d.getElementById("scs").value = "480";
		d.getElementById("ipd").value = "0";
	}

	d.getElementById("knd").value = value;
}

function clickOutr(value) {
	var d = document;
	d.getElementById("out").value = value;
}

function loadFmt() {
	var d = document, fmtAry = ['fmt0', 'fmt1', 'fmt2', 'fmt3', 'fmt4', 'fmt5', 'fmt6', 'fmt7'], x = new Array(fmtAry);

	x.fmt0 = '';

	// 書式1（フル表示（SSフル＋説明付））
	x.fmt1 = '<h2><span style="color: rgb(0, 0, 255);">${title}</span></h2><a href="${phgurl}" target="_blank" rel="nofollow"><img width="100" class="alignleft" align="left" src="${icon100url}" style="border-radius: 20px 20px 20px 20px;-moz-border-radius: 20px 20px 20px 20px;-webkit-border-radius: 20px 20px 20px 20px;box-shadow: 1px 4px 6px 1px #999999;-moz-box-shadow: 1px 4px 6px 1px #999999;-webkit-box-shadow: 1px 4px 6px 1px #999999;margin: -5px 15px 1px 5px;"></a> カテゴリ: ${category}<br> 現在の価格: ${price}（サイズ: ${appsize}）<br> 販売元: <a href="${selleritunes}" target="_blank" rel="nofollow">${seller}</a><br> リリース日: ${pubdate}<br style="clear: both;"><br><a href="${phgurl}" target="_blank" rel="nofollow"><img src="http://r.mzstatic.com/htmlResources/1043/web-storefront/images/viewinitunes_jp.png" style="vertical-align:bottom;" width="90" alt="App"></a> ${gamecenter} ${univ}<br><br>現在のバージョンの評価: ${curverstar}（${curreviewcnt}）<br>全てのバージョンの評価: ${allverstar}（${allreviewcnt}）<br><br><strong>What’s New</strong><br>${descnew}<br><br>${image1} ${image2} ${image3} ${image4} ${image5}<br><br>${univimage1} ${univimage2} ${univimage3} ${univimage4} ${univimage5}<br><br><strong>Description</strong><br>${desc}<br>';

	// 書式2（フル表示（SS2枚））
	x.fmt2 = '<h2><span style="color: rgb(0, 0, 255);">${title}</span></h2><a href="${phgurl}" target="_blank" rel="nofollow"><img width="100" class="alignleft" align="left" src="${icon100url}" style="border-radius: 20px 20px 20px 20px;-moz-border-radius: 20px 20px 20px 20px;-webkit-border-radius: 20px 20px 20px 20px;box-shadow: 1px 4px 6px 1px #999999;-moz-box-shadow: 1px 4px 6px 1px #999999;-webkit-box-shadow: 1px 4px 6px 1px #999999;margin: -5px 15px 1px 5px;"></a> カテゴリ: ${category}<br> 現在の価格: ${price}（サイズ: ${appsize}）<br> 販売元: <a href="${selleritunes}" target="_blank" rel="nofollow">${seller}</a><br> リリース日: ${pubdate}<br style="clear: both;"><br><a href="${phgurl}" target="_blank" rel="nofollow"><img src="http://r.mzstatic.com/htmlResources/1043/web-storefront/images/viewinitunes_jp.png" style="vertical-align:bottom;" width="90" alt="App"></a> ${gamecenter} ${univ}<br><br> 現在のバージョンの評価: ${curverstar}（${curreviewcnt}）<br> 全てのバージョンの評価: ${allverstar}（${allreviewcnt}）<br><br>${image1} ${image2}<br>';

	// 書式3（大アイコン表示）
	x.fmt3 = '<h2><span style="color: rgb(0, 0, 255);">${title}</span></h2><a href="${phgurl}" target="_blank" rel="nofollow"><img width="175" class="alignleft" align="left" src="${icon175url}" style="border-radius: 25px 25px 25px 25px;-moz-border-radius: 25px 25px 25px 25px;-webkit-border-radius: 25px 25px 25px 25px;box-shadow: 1px 4px 6px 1px #999999;-moz-box-shadow: 1px 4px 6px 1px #999999;-webkit-box-shadow: 1px 4px 6px 1px #999999;margin: -5px 15px 1px 5px;"></a> カテゴリ: ${category}<br> 現在の価格: ${price}（サイズ: ${appsize}）<br> 販売元: <a href="${selleritunes}" target="_blank" rel="nofollow">${seller}</a><br> リリース日: ${pubdate}<br> 現在のバージョンの評価: ${curverstar}（${curreviewcnt}）<br> 全てのバージョンの評価: ${allverstar}（${allreviewcnt}）<br><a href="${phgurl}" target="_blank" rel="nofollow"><img src="http://r.mzstatic.com/htmlResources/1043/web-storefront/images/viewinitunes_jp.png" style="vertical-align:bottom;" width="90" alt="App"></a> ${univ}<br> ${gamecenter}<br style="clear: both;">';

	// 書式4（中アイコン表示）
	x.fmt4 = '<a href="${phgurl}" target="_blank" rel="nofollow"><img width="100" class="alignleft" align="left" src="${icon100url}" style="border-radius: 20px 20px 20px 20px;-moz-border-radius: 20px 20px 20px 20px;-webkit-border-radius: 20px 20px 20px 20px;box-shadow: 1px 4px 6px 1px #999999;-moz-box-shadow: 1px 4px 6px 1px #999999;-webkit-box-shadow: 1px 4px 6px 1px #999999;margin: -5px 15px 1px 5px;"></a><strong> ${title}</strong><a href="${phgurl}" target="_blank" rel="nofollow"><img src="http://r.mzstatic.com/htmlResources/1043/web-storefront/images/viewinitunes_jp.png" style="vertical-align:bottom;" width="90" alt="App"></a><br> カテゴリ: ${category}<br> 販売元: <a href="${selleritunes}" target="_blank" rel="nofollow">${seller}</a>（サイズ: ${appsize}）<br> 全てのバージョンの評価: ${allverstar}（${allreviewcnt}）<br> ${gamecenter} ${univ}<br style="clear: both;">';

	// 書式5（小アイコン表示）
	x.fmt5 = '<a href="${phgurl}" target="_blank" rel="nofollow"><img width="75" class="alignleft" align="left" src="${icon75url}" style="border-radius: 11px 11px 11px 11px;-moz-border-radius: 11px 11px 11px 11px;-webkit-border-radius: 11px 11px 11px 11px;box-shadow: 1px 4px 6px 1px #999999;-moz-box-shadow: 1px 4px 6px 1px #999999;-webkit-box-shadow: 1px 4px 6px 1px #999999;margin: -5px 15px 1px 5px;"></a><strong> ${title}</strong><a href="${phgurl}" target="_blank" rel="nofollow"><img src="http://r.mzstatic.com/htmlResources/1043/web-storefront/images/viewinitunes_jp.png" style="vertical-align:bottom;" width="90" alt="App"></a><br> カテゴリ: ${category}<br> 販売元: <a href="${selleritunes}" target="_blank" rel="nofollow">${seller}</a>（サイズ: ${appsize}）<br style="clear: both;">';

	// 書式6（リンクのみ）
	x.fmt6 = '<a href="${phgurl}" target="_blank" rel="nofollow"><strong>${title}</strong></a>';

	// 書式7（予約語一覧）PHGアフィリエイトURLの予約語としてphgurlを追加
	x.fmt7 = '<strong style="color:blue;">アプリ名 ＄{appname}</strong><br>${appname}<br><br><strong style="color:blue;">バージョン ＄{version}</strong><br>${version}<br><br><strong style="color:blue;">価格 ＄{price}</strong><br>${price}<br><br><strong style="color:blue;">タイトル ＄{title}</strong><br>${title}<br><br><strong style="color:blue;">カテゴリ ＄{category}</strong><br>${category}<br><br><strong style="color:blue;">サイズ ＄{appsize}</strong><br>${appsize}<br><br><strong style="color:blue;">発売日 ＄{pubdate}</strong><br>${pubdate}<br><br><strong style="color:blue;">販売元 ＄{seller}</strong><br>${seller}<br><br><strong style="color:blue;">販売元サイト ＄{sellersite}</strong><br>${sellersite}<br><br><strong style="color:blue;">販売元 iTunes ＄{selleritunes}</strong><br>${selleritunes}<br><br><strong style="color:blue;">アイコンURL ＄{icon175url}</strong><br>${icon175url}<br><br><strong style="color:blue;">アイコンURL ＄{icon100url}</strong><br>${icon100url}<br><br><strong style="color:blue;">アイコンURL ＄{icon75url}</strong><br>${icon75url}<br><br><strong style="color:blue;">アイコンURL ＄{icon53url}</strong><br>${icon53url}<br><br><strong style="color:blue;">LinkShareURL ＄{linkshareurl}</strong><br>${linkshareurl}<br><br><strong style="color:blue;">PHGURL ＄{phgurl}</strong><br>${phgurl}<br><br><strong style="color:blue;">アプリURL ＄{url}</strong><br>${url}<br><br><strong style="color:blue;">稼働条件 ＄{moveos}</strong><br>${moveos}<br><br><strong style="color:blue;">メインOS ＄{os}</strong><br>${os}<br><br><strong style="color:blue;">ゲームセンター対応 ＄{gamecenter}</strong><br>${gamecenter}<br><br><strong style="color:blue;">ユニバーサル対応 ＄{univ}</strong><br>${univ}<br><br><strong style="color:blue;">言語 ＄{lang}</strong><br>${lang}<br><br><strong style="color:blue;">レーティング ＄{rating}</strong><br>${rating}<br><br><strong style="color:blue;">現バージョン評価 ＄{curverrating}</strong><br>${curverrating}<br><br><strong style="color:blue;">現バージョン星 ＄{curverstar}</strong><br>${curverstar}<br><br><strong style="color:blue;">現バージョンレビュー数 ＄{curreviewcnt}</strong><br>${curreviewcnt}<br><br><strong style="color:blue;">全バージョン評価 ＄{allverrating}</strong><br>${allverrating}<br><br><strong style="color:blue;">全バージョン星 ＄{allverstar}</strong><br>${allverstar}<br><br><strong style="color:blue;">全バージョンレビュー数 ＄{allreviewcnt}</strong><br>${allreviewcnt}<br><br><strong style="color:blue;">アプリ説明 ＄{desc}</strong><br>${desc}<br><br><strong style="color:blue;">新機能説明 ＄{descnew}</strong><br>${descnew}<br><br><strong style="color:blue;">スクリーンショット1 ＄{image1}</strong><br>${image1}<br><br><strong style="color:blue;">スクリーンショット2 ＄{image2}</strong><br>${image2}<br><br><strong style="color:blue;">スクリーンショット3 ＄{image3}</strong><br>${image3}<br><br><strong style="color:blue;">スクリーンショット4 ＄{image4}</strong><br>${image4}<br><br><strong style="color:blue;">スクリーンショット5 ＄{image5}</strong><br>${image5}<br><br><strong style="color:blue;">Univスクリーンショット1 ＄{univimage1}</strong><br>${univimage1}<br><br><strong style="color:blue;">Univスクリーンショット2 ＄{univimage2}</strong><br>${univimage2}<br><br><strong style="color:blue;">Univスクリーンショット3 ＄{univimage3}</strong><br>${univimage3}<br><br><strong style="color:blue;">Univスクリーンショット4 ＄{univimage4}</strong><br>${univimage4}<br><br><strong style="color:blue;">Univスクリーンショット5 ＄{univimage5}</strong><br>${univimage5}<br>';

	// 選択された書式テンプレートをソース表示
	d.getElementById("code").value = x[d.getElementById("fmt").value];
}
//-->
</script>
</head> 
<body style="margin:20px 0 0 30px" link="#3333FF" vlink="#3333FF"> 
<div id="inputHtml">
<h2>AppHtmlメーカー</h2> 
<form id="inputFrame">
<strong>検索対象を指定して下さい（随時追加予定...）</strong><br>
<input type="radio" name="kndr" value="software" onclick="javascript:clickKndr(this.value);bmClear();" checked>iPhone App　
<input type="radio" name="kndr" value="iPadSoftware" onclick="javascript:clickKndr(this.value);bmClear();" >iPad App　
<input type="radio" name="kndr" value="macSoftware" onclick="javascript:clickKndr(this.value);bmClear();" >Mac App<br>
<input type="hidden" id="knd" value="software">
<br>
<strong>Bookmarklet名を入力して下さい</strong><br>
<input type="text" size="30" id="bmn" value="AppHtml" onChange="javascript:bmClear();"><br>
<br>
<strong>スクショ長辺ピクセルとユニバーサルのスクショ拡大率を入力して下さい</strong><br>
<input type="text" size="30" id="scs" value=288 onChange="javascript:bmClear();"><input type="text" size="30" id="ipd" value=1.5 onchange="javascript:bmClear();"><br>
<br>
<strong>リンクシェアid（任意）と結果の最大件数を入力して下さい</strong><br>
<input type="text" size="30" id="aff" value="" onchange="javascript:bmClear();"><input type="text" size="30" id="cnt" value="8" onchange="javascript:bmClear();"><br>
<a style="font-size: 85%;" target="_blank" href="http://blog.goo.ne.jp/spanske_stol/e/b13a70f9eed0c6aa21395c4a02b98eb4">リンクシェアidは@nashiko_さんが解説して下さってますヽ(´ー`)ﾉ</a><br><br>
<strong style="color:red">iTunesのリンクシェアアフィリエイトは2013年10月1日に廃止になります。引き続きアフィリエイトを利用する方は、以下のPHGアフィリエイトに移行してください。</strong>
<br><br>
<strong>PHGアフィリエイトID（任意）を入力して下さい</strong><br><!-- この設定を追加 -->
<input type="text" size="30" id="phg" value="" onchange="javascript:bmClear();"><br><a href="http://www.apple.com/jp/itunes/affiliates/" targer="blank" style="font-size:85%">PHGアフィリエイトの申込はこちらから</a>。
<br><br>
<strong>出力方法を選択して下さい</strong><br>
<select id="select-out" onchange="javascript:clickOutr(this.value);bmClear();">
<option value="preview" selected>プレビュー表示</option>
<option value="popup">ポップアップのみ</option>
<option value="pop-textforce">ポップアップ→Textforce連携</option>
<option value="textforce">Textforceに連携</option>
<option value="safari-textforce">Textforceに連携しSafariに戻る</option>
<option value="draftpad">DraftPadに連携</option>
<option value="slpro">するぷろに連携</option>
<option value="moblogger">Mobloggerに連携</option>
<option value="moblogger-app">Mobloggerを起動して追記</option>
<option value="moblogger-pb">Mobloggerを起動してクリップボードにコピー</option>
<option value="myeditor">MyEditorを起動</option>
<option value="myeditor-cursor">MyEditorのカーソル位置に挿入</option>
<option value="rowline">Rowlineを起動して文末に追加</option>
<option value="msth"><a href="http://d.matu.biz/archives/459" title="[iPhone][iPad]転送先は自分で管理！好きなアプリにテキストを転送できるMyScripts用スクリプト「TextHandler」！ | matuダイアリー">好きなアプリにテキストを転送できるMyScripts用スクリプト「TextHandler」</a>に送る</option>
<option value="thumbedit">ThumbEditに送る</option>
<option value="thumbedit-insert">ThumbEditに追記</option>
<option value="presssync">PressSync Proへ送る</option>
</select>
<input type="hidden" id="out" value="preview"><br>
<br>
<strong>書式テンプレートを選択して下さい</strong><br>
<select id="fmt" onchange="javascript:loadFmt();bmClear();">
<option value='fmt0'>書式テンプレートを選択して下さい</option>
<option value='fmt1'>フル表示（SSフル＋説明付）</option>
<option value='fmt2'>フル表示（SS2枚）</option>
<option value='fmt3'>大アイコン表示</option>
<option value='fmt4'>中アイコン表示</option>
<option value='fmt5'>小アイコン表示</option>
<option value='fmt6'>リンクのみ</option>
<option value='fmt7'>予約語一覧</option>
</select><br>
<br>
<strong>以下を直接カスタマイズすることもできます（但し ' は禁止文字）</strong><br>
<textarea id="code" style="width:410px;height:100px;padding:2px;" onchange="javascript:bmClear();"></textarea><br>
<strong style="font-size: 85%;color: red;">プレビュー表示でデモするとカスタマイズ書式は消えちゃうので注意を!!</strong><br>
<br>
<input type="button" value="Bookmarkletを生成する" id="buttonShow" onclick="javascript:bmCreate();">
</form></div> 
<div id="bmHtml"></div> 
</body> 
</html>
